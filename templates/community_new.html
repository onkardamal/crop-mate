{% extends 'base.html' %}
{% block title %}CropMate - Community{% endblock %}
{% block extra_head %}
    <style>
        .community-card {
            border: none;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            transition: var(--transition-normal);
            margin-bottom: var(--spacing-lg);
            overflow: hidden;
        }
        
        .community-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .community-header {
            background: var(--gradient-primary);
            color: var(--white);
            padding: var(--spacing-lg);
            text-align: center;
        }
        
        .community-header h3 {
            margin: 0;
            font-weight: 600;
        }
        
        .community-body {
            padding: var(--spacing-lg);
        }
        
        .story-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            border-left: 4px solid var(--success);
            transition: var(--transition-normal);
        }
        
        .story-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .story-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }
        
        .story-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            margin-right: var(--spacing-md);
        }
        
        .story-info h6 {
            margin: 0;
            color: var(--dark-gray);
            font-weight: 600;
        }
        
        .story-info small {
            color: var(--gray);
        }
        
        .story-content {
            color: var(--dark-gray);
            line-height: 1.6;
            margin-bottom: var(--spacing-md);
        }
        
        .story-stats {
            display: flex;
            gap: var(--spacing-lg);
            color: var(--gray);
            font-size: var(--font-size-sm);
        }
        
        .story-stats span {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }
        
        .expert-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: var(--spacing-lg);
            text-align: center;
            transition: var(--transition-normal);
            border-top: 4px solid var(--info);
        }
        
        .expert-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .expert-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--gradient-info);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: var(--font-size-xl);
            font-weight: 600;
            margin: 0 auto var(--spacing-md);
        }
        
        .expert-name {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--dark-gray);
            margin-bottom: var(--spacing-xs);
        }
        
        .expert-title {
            color: var(--info);
            font-weight: 500;
            margin-bottom: var(--spacing-sm);
        }
        
        .expert-specialization {
            background: var(--gradient-light);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }
        
        .expert-specialization h6 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }
        
        .expert-specialization p {
            color: var(--gray);
            margin: 0;
            font-size: var(--font-size-sm);
        }
        
        .expert-contact {
            background: var(--gradient-primary);
            color: var(--white);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }
        
        .expert-contact h6 {
            margin-bottom: var(--spacing-xs);
        }
        
        .contact-info {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-xs);
            font-size: var(--font-size-sm);
        }
        
        .contact-info i {
            margin-right: var(--spacing-sm);
            width: 16px;
        }
        
        .forum-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            border-left: 4px solid var(--warning);
        }
        
        .forum-header {
            display: flex;
            justify-content: between;
            align-items: start;
            margin-bottom: var(--spacing-md);
        }
        
        .forum-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--dark-gray);
            margin-bottom: var(--spacing-xs);
        }
        
        .forum-meta {
            color: var(--gray);
            font-size: var(--font-size-sm);
            margin-bottom: var(--spacing-sm);
        }
        
        .forum-content {
            color: var(--dark-gray);
            line-height: 1.6;
            margin-bottom: var(--spacing-md);
        }
        
        .forum-stats {
            display: flex;
            gap: var(--spacing-lg);
            color: var(--gray);
            font-size: var(--font-size-sm);
        }
        
        .forum-stats span {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }
        
        .search-section {
            background: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }
        
        .search-input {
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: var(--font-size-lg);
            width: 100%;
            transition: var(--transition-fast);
        }
        
        .search-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 0.2rem rgba(46, 139, 87, 0.25);
        }
        
        .filter-section {
            background: var(--gradient-light);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }
        
        .filter-btn {
            background: var(--white);
            border: 2px solid var(--primary-color);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            margin: var(--spacing-xs);
            cursor: pointer;
            transition: var(--transition-fast);
            font-weight: 500;
        }
        
        .filter-btn:hover,
        .filter-btn.active {
            background: var(--primary-color);
            color: var(--white);
        }
    </style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1><i class="bi bi-people"></i> Farmer Community</h1>
        <p class="subtitle">Connect with fellow farmers, share experiences, and learn from success stories</p>
    </div>

    <div class="search-section">
        <div class="row">
            <div class="col-md-8">
                <input type="text" class="search-input" id="searchInput" placeholder="Search for stories, experts, or discussions...">
            </div>
            <div class="col-md-4">
                <select class="form-select" id="categoryFilter">
                    <option value="">All Categories</option>
                    <option value="stories">Success Stories</option>
                    <option value="experts">Expert Advice</option>
                    <option value="forum">Community Forum</option>
                </select>
            </div>
        </div>
    </div>

    <div class="filter-section">
        <h5 class="mb-3"><i class="bi bi-funnel"></i> Filter Content</h5>
        <div class="d-flex flex-wrap">
            <button class="filter-btn active" data-filter="all">All Content</button>
            <button class="filter-btn" data-filter="stories">Success Stories</button>
            <button class="filter-btn" data-filter="experts">Expert Advice</button>
            <button class="filter-btn" data-filter="forum">Community Forum</button>
        </div>
    </div>

    <div class="row">
        <!-- Success Stories -->
        <div class="col-md-8">
            <h4 class="mb-4"><i class="bi bi-star"></i> Success Stories</h4>
            
            <div class="story-card" data-category="stories">
                <div class="story-header">
                    <div class="story-avatar">RK</div>
                    <div class="story-info">
                        <h6>Rajesh Kumar</h6>
                        <small>Punjab • Rice Farmer • 5 years experience</small>
                    </div>
                </div>
                <div class="story-content">
                    "I increased my rice yield by 40% using the recommendations from CropMate. The soil analysis feature helped me understand exactly what my fields needed. Now I'm earning ₹2 lakh more per season!"
                </div>
                <div class="story-stats">
                    <span><i class="bi bi-heart"></i> 24 likes</span>
                    <span><i class="bi bi-chat"></i> 8 comments</span>
                    <span><i class="bi bi-share"></i> 3 shares</span>
                </div>
            </div>

            <div class="story-card" data-category="stories">
                <div class="story-header">
                    <div class="story-avatar">SM</div>
                    <div class="story-info">
                        <h6>Sunita Mehta</h6>
                        <small>Maharashtra • Cotton Farmer • 8 years experience</small>
                    </div>
                </div>
                <div class="story-content">
                    "The profitability calculator helped me choose the right crops for my land. I switched from traditional crops to high-value vegetables and doubled my income. The market trends feature is a game-changer!"
                </div>
                <div class="story-stats">
                    <span><i class="bi bi-heart"></i> 18 likes</span>
                    <span><i class="bi bi-chat"></i> 12 comments</span>
                    <span><i class="bi bi-share"></i> 5 shares</span>
                </div>
            </div>

            <div class="story-card" data-category="stories">
                <div class="story-header">
                    <div class="story-avatar">AP</div>
                    <div class="story-info">
                        <h6>Amit Patel</h6>
                        <small>Gujarat • Wheat Farmer • 12 years experience</small>
                    </div>
                </div>
                <div class="story-content">
                    "The seasonal calendar feature helped me plan my farming activities perfectly. I never miss the optimal sowing time anymore. My wheat production has increased by 25% since using CropMate."
                </div>
                <div class="story-stats">
                    <span><i class="bi bi-heart"></i> 31 likes</span>
                    <span><i class="bi bi-chat"></i> 6 comments</span>
                    <span><i class="bi bi-share"></i> 2 shares</span>
                </div>
            </div>

            <!-- Community Forum -->
            <h4 class="mb-4 mt-5"><i class="bi bi-chat-dots"></i> Community Forum</h4>
            
            <div class="forum-card" data-category="forum">
                <div class="forum-header">
                    <div>
                        <h5 class="forum-title">Best practices for organic farming</h5>
                        <div class="forum-meta">Posted by <strong>Vikram Singh</strong> • 2 hours ago</div>
                    </div>
                </div>
                <div class="forum-content">
                    "I'm planning to switch to organic farming. Can anyone share their experience with organic fertilizers and pest control methods? What are the challenges I should be prepared for?"
                </div>
                <div class="forum-stats">
                    <span><i class="bi bi-reply"></i> 15 replies</span>
                    <span><i class="bi bi-eye"></i> 45 views</span>
                    <span><i class="bi bi-heart"></i> 8 likes</span>
                </div>
            </div>

            <div class="forum-card" data-category="forum">
                <div class="forum-header">
                    <div>
                        <h5 class="forum-title">Water management during drought</h5>
                        <div class="forum-meta">Posted by <strong>Priya Sharma</strong> • 5 hours ago</div>
                    </div>
                </div>
                <div class="forum-content">
                    "With the current water shortage in our region, what are the best water conservation techniques? I'm looking for practical solutions that don't require heavy investment."
                </div>
                <div class="forum-stats">
                    <span><i class="bi bi-reply"></i> 22 replies</span>
                    <span><i class="bi bi-eye"></i> 67 views</span>
                    <span><i class="bi bi-heart"></i> 12 likes</span>
                </div>
            </div>
        </div>

        <!-- Expert Advice -->
        <div class="col-md-4">
            <h4 class="mb-4"><i class="bi bi-person-badge"></i> Expert Advisors</h4>
            
            <div class="expert-card" data-category="experts">
                <div class="expert-avatar">DR</div>
                <h5 class="expert-name">Dr. Rajesh Verma</h5>
                <div class="expert-title">Agricultural Scientist</div>
                <div class="expert-specialization">
                    <h6>Specialization</h6>
                    <p>Soil Science, Crop Nutrition, Sustainable Farming</p>
                </div>
                <div class="expert-contact">
                    <h6>Contact</h6>
                    <div class="contact-info">
                        <i class="bi bi-phone"></i>
                        <span>+91 98765 43210</span>
                    </div>
                    <div class="contact-info">
                        <i class="bi bi-envelope"></i>
                        <span>rajesh.verma@agri.com</span>
                    </div>
                </div>
            </div>

            <div class="expert-card" data-category="experts">
                <div class="expert-avatar">PS</div>
                <h5 class="expert-name">Prof. Sunita Agarwal</h5>
                <div class="expert-title">Plant Pathologist</div>
                <div class="expert-specialization">
                    <h6>Specialization</h6>
                    <p>Disease Management, Pest Control, Organic Farming</p>
                </div>
                <div class="expert-contact">
                    <h6>Contact</h6>
                    <div class="contact-info">
                        <i class="bi bi-phone"></i>
                        <span>+91 87654 32109</span>
                    </div>
                    <div class="contact-info">
                        <i class="bi bi-envelope"></i>
                        <span>sunita.agarwal@plant.com</span>
                    </div>
                </div>
            </div>

            <div class="expert-card" data-category="experts">
                <div class="expert-avatar">MK</div>
                <h5 class="expert-name">Mr. Kumar</h5>
                <div class="expert-title">Market Analyst</div>
                <div class="expert-specialization">
                    <h6>Specialization</h6>
                    <p>Market Trends, Price Analysis, Export Opportunities</p>
                </div>
                <div class="expert-contact">
                    <h6>Contact</h6>
                    <div class="contact-info">
                        <i class="bi bi-phone"></i>
                        <span>+91 76543 21098</span>
                    </div>
                    <div class="contact-info">
                        <i class="bi bi-envelope"></i>
                        <span>kumar@market.com</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const categoryFilter = document.getElementById('categoryFilter');
    const filterButtons = document.querySelectorAll('.filter-btn');
    const contentCards = document.querySelectorAll('.story-card, .expert-card, .forum-card');

    // Search functionality
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        filterContent();
    });

    // Category filter
    categoryFilter.addEventListener('change', function() {
        filterContent();
    });

    // Filter buttons
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            filterButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            filterContent();
        });
    });

    function filterContent() {
        const searchTerm = searchInput.value.toLowerCase();
        const selectedCategory = categoryFilter.value;
        const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;

        contentCards.forEach(card => {
            const cardText = card.textContent.toLowerCase();
            const cardCategory = card.dataset.category;

            const matchesSearch = searchTerm === '' || cardText.includes(searchTerm);
            const matchesCategory = selectedCategory === '' || cardCategory === selectedCategory;
            const matchesFilter = activeFilter === 'all' || cardCategory === activeFilter;

            if (matchesSearch && matchesCategory && matchesFilter) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }
});
</script>
{% endblock %}
